<script>
import axios from 'axios'
export default {
    name : 'QuestionsTable',
    data(){
        return{
            questions : [             
            ]
        }
    },
    methods:{
        testCall(){
            axios.get('http://localhost:4000/questions/all')
            .then(response =>{
                console.log(response.data['result'])
                this.questions = response.data['result']
            })
        },
    },
    mounted(){
        this.testCall()
    }
}
</script>

<template>
        <div class="top-questions-container d-flex flex-column">
            <h3>All Questions</h3>

            <div class="list-group">

            <a v-for="question in questions" :key="question.id" class="list-group-item list-group-item-action d-flex flex-row" 
                :href="'?qid=' + question.id + '#/answer'">
                    <div class="buttons-container d-flex flex-column col-1">
                        <div class="votes-container">
                                <p>{{question.votes}}</p>
                                <p>votes</p>
                        </div>

                        <div class="answers-container">
                            <div class="delete-questions">
                                <button type="button" >Delete Question</button>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex d-flex flex-column col-9">
                        <h5 class="mb-1">{{question.heading}}</h5>
                        <p class="mb-1">{{question.description}}</p>
                        <p class="mb-1">{{question.tags}}</p>
                    </div>

                    <div class="d-flex flex-column col justify-content-between">
                        <small>{{question.user}}</small>
                        <small>{{question.time}}</small>
                    </div>

                </a>

            </div>

        </div>

        <div class="d-flex function-buttons-container">
            <a class="btn-ask-question" href="#/question">
                Ask A Question
            </a>
            <a class="btn btn-outline-dark" href="#/signin">
                Vote
            </a>       
        </div>

</template>

<style scoped>
.top-questions-container{
    margin: 50px auto;
    width: 90%;
}


.list-group{
    width: 100%;
    margin: 30px auto;
}

.list-group a{
    padding: 15px;
}

.buttons-container{
    margin-right: 40px;
    justify-content: center;
    align-items: center;
}

.votes-container{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: hsl(210,8%,45%);
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
    text-align: center;
    width: 90px;
}

.answers-container{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: #ee0303;
    border: 0;
    outline: none;
    border-radius: 6px;
    color: white;
}

.delete-questions button{
    background: #ee0303;
    border: 0;
    outline: none;
    border-radius: 6px;
    color: white;
}

.answers-container p{
    color: white;
}


.votes-container p, .answers-container p{
    margin: 0;
}

.function-buttons-container{
    justify-content: center;
    align-items: center;
}

.function-buttons-container a{
    margin: 10px;
    border-radius: 4px;
    text-decoration: none;
    font-weight: 600;
    width: 130px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 7px;
}

.btn-ask-question{
    background: #0d6efd;
    color: white;
}
</style>